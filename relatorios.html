<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
   <title>RelatÃ³rios</title>
 <!-- Hide app until sessionStorage check passes -->
 <style>#app { display: none; }</style>
 <!-- Redirect if not logged in -->
 <script>
  if (!sessionStorage.getItem('logged_in_user')) {
     window.location.replace('index.html');
   }
 </script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #d9dde2;
      margin: 0;
      padding: 1rem;
    }

table td:nth-child(2),
table th:nth-child(2) {
  min-width: 110px;
}



tr.selected {
  background-color: #d0ebff !important;
}

tr:hover {
  background-color: #f0f8ff;
  cursor: pointer;
}

    .container {
      display: grid;
      grid-template-columns: 1fr 2fr 1fr;
      gap: 1rem;
      align-items: flex-start;
    }

    .panel {
      background: #f4f4f4;
      padding: 1rem;
      border-radius: 8px;
      box-shadow: 0 0 6px rgba(0,0,0,0.1);
    }

    .form-group {
      margin-bottom: 0.8rem;
    }

    .form-group label {
      display: block;
      font-weight: bold;
      margin-bottom: 0.3rem;
    }

    .form-group input,
    .form-group select {
      width: 100%;
      padding: 0.4rem;
      border-radius: 4px;
      border: 1px solid #ccc;
    }

    .form-group-inline {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.8rem;
    }

    .form-group-inline label {
      white-space: nowrap;
    }

    button {
      padding: 0.4rem 0.8rem;
      border: none;
      border-radius: 4px;
      background-color: #6c757d;
      color: white;
      cursor: pointer;
    }

    button:hover {
      background-color: #5a6268;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 0.5rem;
    }

    th, td {
      border: 1px solid #aaa;
      padding: 0.4rem;
      text-align: center;
    }

    @media (max-width: 768px) {
      .container {
        grid-template-columns: 1fr;
      }
    }

/* make aggregated rows look clickable */
#tabelaMensalBody tr { 
  cursor: pointer; 
}
#tabelaMensalBody tr:hover { 
  background: #eef7ff; 
}
  </style>
</head>
 <body>
   <div id="app">

  <div class="container">
    <!-- Left Panel -->
    <div class="panel">
      <div class="form-group-inline">
        <label for="dataDe">De</label>
        <input type="text" id="dataDe" placeholder="dd/mm/aaaa" maxlength="10">
        <label for="dataAte">a</label>
        <input type="text" id="dataAte" placeholder="dd/mm/aaaa" maxlength="10">
      </div>

      

      <div class="form-group-inline">
        <label for="codigoFornecedor">Fornecedor</label>
        <input type="text" id="fornecedorIdInput" placeholder="ID" style="width: 50px;">
        <input type="text" id="fornecedorNomeInput" placeholder="Nome do Fornecedor" style="flex: 1;">
      </div>

      <div class="form-group-inline">
        <label for="statusSelect">STATUS</label>
        <select id="statusSelect">
           <!-- Options will be added dynamically -->
        </select>
        <button id="btnAtualizar">Atualizar</button>
      </div>
       <!-- ðŸ‘ˆ Move Ver Mensal to the left -->
  <div class="panel" style="min-width: 220px;">
    <button id="btnVerMensal" style="width: 100%; margin-bottom: 0.5rem;">Ver Mensal</button>
    <button id="btnVerDiario" style="width: 100%; margin-bottom: 1rem;">Ver DiÃ¡rio</button>

    <table>
      <thead>
        <tr>
          <th>DATA</th>
          <th>VALOR A PAGAR</th>
        </tr>
      </thead>
      <tbody id="tabelaMensalBody">
        <!-- dynamic rows -->
      </tbody>
    </table>
  </div>





    </div>

    


    

    <!-- Center Panel (Empty Table Area) -->
    <div class="panel">
      <table>
        <thead>
          <tr>
	    <th>ID</th>
            <th>Parcela</th>
      	    <th>Data Venc</th>
            <th>Valor Parcela</th>
            <th>NÃºmero</th>
            <th>Fornecedor</th>
            <th>Status</th>
            <th>MOD PAG</th>
            <th>Juros</th>
            <th>Valor Pago</th>	    
          </tr>
        </thead>
        <tbody id="parcelas-body">
          <!-- dynamic rows -->
        </tbody>
      </table>
    </div>





<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<script>
const supabase = window.supabase.createClient(
  'https://khmynualndfvegbbipfd.supabase.co',
  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtobXludWFsbmRmdmVnYmJpcGZkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkzOTI1NTUsImV4cCI6MjA2NDk2ODU1NX0.Va1zWBLYL87SAz_nIXaiJeGi56YZ1bQ7dAl_fyqS2rI'
);

let fornecedorData = [];

async function carregarPopupFornecedores() {
  const popup = document.getElementById('popupModal');
  const tbody = document.querySelector('#popupTable tbody');
  tbody.innerHTML = '<tr><td colspan="2">Carregando...</td></tr>';
  popup.style.display = 'block';

  const { data, error } = await supabase.from('CadFornecedor').select('ID, Nome');
  if (error) {
    tbody.innerHTML = `<tr><td colspan="2">Erro: ${error.message}</td></tr>`;
    return;
  }

  fornecedorData = data;
  renderFornecedorTable(data);
  const searchInput = document.getElementById('searchInput');
  searchInput.value = '';
  searchInput.oninput = () => {
    const term = searchInput.value.trim().toLowerCase();
    const filtered = fornecedorData.filter(row => row.Nome.toLowerCase().includes(term));
    renderFornecedorTable(filtered);
  };
}

function renderFornecedorTable(data) {
  const tbody = document.querySelector('#popupTable tbody');
  tbody.innerHTML = '';
  if (data.length === 0) {
    tbody.innerHTML = '<tr><td colspan="2">Nenhum resultado</td></tr>';
    return;
  }
  data.forEach(row => {
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${row.ID}</td><td>${row.Nome}</td>`;
    tr.style.cursor = 'pointer';
    tr.addEventListener('click', () => {
      document.getElementById('fornecedorIdInput').value = row.ID;
      document.getElementById('fornecedorNomeInput').value = row.Nome;
      document.getElementById('popupModal').style.display = 'none';
    });
    tbody.appendChild(tr);
  });
}

// Hook up double click to open
document.getElementById('fornecedorNomeInput').addEventListener('dblclick', carregarPopupFornecedores);

document.getElementById('btnVerDiario').addEventListener('click', verDiario);
document.getElementById('btnVerMensal').addEventListener('click', verMensalComSubtotais);



async function carregarStatusUnicos() {
  const { data, error } = await supabase
    .from('Parcelas')
    .select('STATUS', { distinct: true });

  if (error) {
    console.error('Erro ao carregar STATUS:', error.message);
    return;
  }

  const statusSelect = document.getElementById('statusSelect');
  statusSelect.innerHTML = ''; // Clear previous options

  // Optionally add a default "Todos"
  const defaultOption = document.createElement('option');
  defaultOption.value = 'Todos';
  defaultOption.textContent = 'Todos';
  statusSelect.appendChild(defaultOption);

  const uniqueStatuses = [...new Set(data.map(item => item.STATUS))];

  uniqueStatuses.forEach(status => {
    const option = document.createElement('option');
    option.value = status;
    option.textContent = status;
    statusSelect.appendChild(option);
  });
}

// Call the function on page load
document.addEventListener('DOMContentLoaded', carregarStatusUnicos);


document.getElementById('btnAtualizar').addEventListener('click', buscarParcelas);


async function buscarParcelas() {
  const status = document.getElementById('statusSelect').value;
  const de = document.getElementById('dataDe').value;
  const ate = document.getElementById('dataAte').value;
  const fornecedor = document.getElementById('fornecedorIdInput').value.trim();

  let query = supabase
    .from('Parcelas')
    .select(`
      ID,
      PARCELA,
      DATAVENC,
      VALORPARCELA,
      NUMERO,
      STATUS,
      FORNECEDOR,
      CadFornecedor(Nome),
      MODPAG,
      JUROS,
      VALORPAG,
      COMPROVANTE,
      url
      `)
    .order('DATAVENC', { ascending: true });

  if (status !== 'Todos') query = query.eq('STATUS', status);
  if (fornecedor !== '') query = query.eq('FORNECEDOR', fornecedor);

  const formatDate = (d) => {
    const parts = d.split('/');
    return `${parts[2]}-${parts[1]}-${parts[0]}`;
  };

  if (de) query = query.gte('DATAVENC', formatDate(de));
  if (ate) query = query.lte('DATAVENC', formatDate(ate));

  const { data, error } = await query;

  if (error) {
    console.error("Erro ao buscar parcelas:", error.message);
    alert("Erro ao buscar parcelas: " + error.message);
    return;
  }

  const tbody = document.getElementById('parcelas-body');
  tbody.innerHTML = '';

  

  data.forEach(row => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${row.ID}</td>
      <td>${row.PARCELA}</td>
      <td>${formatDateBR(row.DATAVENC)}</td>
      <td>${formatBRL(row.VALORPARCELA)}</td>
      <td>${row.NUMERO}</td>
      <td>${row.CadFornecedor?.Nome || 'N/A'}</td>	
      <td>${row.STATUS}</td>
      <td>${row.MODPAG}</td>
      <td>${formatBRL(row.JUROS)}</td>
      <td>${formatBRL(row.VALORPAG ?? row.VALORPARCELA)}</td>      
    `;

    // Highlight row on click
    tr.addEventListener('click', () => {
      tbody.querySelectorAll('tr').forEach(r => r.classList.remove('selected'));
      tr.classList.add('selected');
    });

    // Open modal on double-click
    tr.addEventListener('dblclick', () => {
      abrirEditarModal(row);
    });

    tbody.appendChild(tr);
  });
}

function formatDateBR(isoDate) {
    if (!isoDate) return '';
    const [year, month, day] = isoDate.split('T')[0].split('-');
    return `${day}/${month}/${year}`;
  }

function abrirEditarModal(data) {
  document.getElementById('edit-id').value = data.ID || '';
  document.getElementById('edit-data').value = formatDateBR(data.DATAVENC);
  document.getElementById('edit-parcela').value = data.PARCELA;
  document.getElementById('edit-valorparcela').value = data.VALORPARCELA?.toString().replace('.', ',') || '';

  document.getElementById('edit-juros').value = data.JUROS?.toString().replace('.', ',') || '';

  const valorPago = (data.VALORPAG !== null && data.VALORPAG !== undefined)
  ? data.VALORPAG
  : data.VALORPARCELA;

  document.getElementById('edit-valorpago').value = valorPago?.toString().replace('.', ',') || '';




  document.getElementById('edit-fornecedor').value = data.CadFornecedor?.Nome || '';
  document.getElementById('edit-numero').value = data.NUMERO;
  document.getElementById('edit-status').value = data.STATUS;
  document.getElementById('edit-modopag').value = data.MODPAG || '';
  document.getElementById('edit-comprovante').value = data.COMPROVANTE || '';
  document.getElementById('edit-origem').value = data.url || '';

  document.getElementById('editarModal').style.display = 'block';
}



function setupAutoDateFormat(id) {
  const input = document.getElementById(id);
  if (!input) return;

  input.addEventListener('input', e => {
    let value = e.target.value.replace(/\D/g, '');
    if (value.length > 8) value = value.slice(0, 8);

    if (value.length > 4) {
      value = `${value.slice(0,2)}/${value.slice(2,4)}/${value.slice(4)}`;
    } else if (value.length > 2) {
      value = `${value.slice(0,2)}/${value.slice(2)}`;
    }

    e.target.value = value;
  });
}

// Call this after DOMContentLoaded
setupAutoDateFormat('dataDe');
setupAutoDateFormat('dataAte');


function fecharEditarModal() {
    document.getElementById('editarModal').style.display = 'none';
  }

function LiquidarModal() {
  const id = document.getElementById('edit-id').value;
  const valorPago = parseFloat(document.getElementById('edit-valorpago').value.replace(',', '.')) || 0;
  const comprovante = document.getElementById('edit-comprovante').value;
  const juros = parseFloat(document.getElementById('edit-juros').value.replace(',', '.')) || 0;

  if (!id) {
    alert("ID invÃ¡lido.");
    return;
  }

  supabase
    .from('Parcelas')
    .update({
      VALORPAG: valorPago,
      COMPROVANTE: comprovante,
      JUROS: juros,
      STATUS: 'LIQUIDADO'
    })
    .eq('ID', id)
    .then(({ error }) => {
      if (error) {
        console.error("Erro ao liquidar:", error);
        alert("Erro ao liquidar parcela: " + error.message);
      } else {
        alert("Parcela liquidada com sucesso!");
        fecharEditarModal();
        buscarParcelas();
      }
    });
}




document.addEventListener('DOMContentLoaded', () => {
  const btnSalvar = document.getElementById('btnSalvarEdicao');
  if (btnSalvar) {
    btnSalvar.addEventListener('click', async () => {
      const id = document.getElementById('edit-id').value;
      const dataVenc = document.getElementById('edit-data').value;
      const parcela = document.getElementById('edit-parcela').value;
      

   function parseDecimalRaw(input) {
  if (!input) return 0;
  return parseFloat(
    input.replace(/\./g, '').replace(',', '.')
  ) || 0;
}


const valorParcela = parseDecimalRaw(document.getElementById('edit-valorparcela').value);
const juros = parseDecimalRaw(document.getElementById('edit-juros').value);
const valorPago = parseDecimalRaw(document.getElementById('edit-valorpago').value);




      const numero = document.getElementById('edit-numero').value;
      const status = document.getElementById('edit-status').value;
      const modopag = document.getElementById('edit-modopag').value;
      const comprovante = document.getElementById('edit-comprovante').value;

      const formatToISO = (dateStr) => {
        const [dd, mm, yyyy] = dateStr.split('/');
        return `${yyyy}-${mm}-${dd}`;
      };

      const { error } = await supabase
        .from('Parcelas')
        .update({
          DATAVENC: formatToISO(dataVenc),
          PARCELA: parcela,
          VALORPARCELA: valorParcela,
          JUROS: juros,
          VALORPAG: valorPago,
          NUMERO: numero,
          STATUS: status,
          MODPAG: modopag,
          COMPROVANTE: comprovante
        })
        .eq('ID', id);

      if (error) {
        alert('Erro ao atualizar: ' + error.message);
        console.error(error);
      } else {
        alert('Registro atualizado com sucesso!');
        fecharEditarModal();
        buscarParcelas();
      }
    });
  }
});

// shared: parse date range inputs and apply to query
function applyDateFilters(query) {
  const de = document.getElementById('dataDe').value;
  const ate = document.getElementById('dataAte').value;
  const formatDate = (d) => {
    const parts = d.split('/');
    if (parts.length !== 3) return null;
    return `${parts[2]}-${parts[1]}-${parts[0]}`; // ISO yyyy-mm-dd
  };
  if (de) {
    const isoDe = formatDate(de);
    if (isoDe) query = query.gte('DATAVENC', isoDe);
  }
  if (ate) {
    const isoAte = formatDate(ate);
    if (isoAte) query = query.lte('DATAVENC', isoAte);
  }
  return query;
}

function formatDateBRFromISO(isoDate) {
  if (!isoDate) return '';
  const [year, month, day] = isoDate.split('T')[0].split('-');
  return `${day}/${month}/${year}`;
}

// Format number as Brazilian Real, e.g. 1234.5 -> "R$ 1.234,50"
function formatBRL(value) {
  const num = parseFloat(value);
  if (isNaN(num)) return 'R$ 0,00';
  return new Intl.NumberFormat('pt-BR', {
    style: 'currency',
    currency: 'BRL',
    minimumFractionDigits: 2,
  }).format(num);
}


// Daily aggregation: sum VALORPARCELA by exact date where STATUS = 'ABERTO'
async function verDiario() {
  let query = supabase
    .from('Parcelas')
    .select('DATAVENC, VALORPARCELA, STATUS')
    .eq('STATUS', 'ABERTO')
    .order('DATAVENC', { ascending: true });

  query = applyDateFilters(query);

  const { data, error } = await query;
  if (error) {
    alert('Erro ao carregar diÃ¡rio: ' + error.message);
    console.error(error);
    return;
  }

  // aggregate by date (day)
  const buckets = {};
  data.forEach(row => {
    if (!row.DATAVENC) return;
    const dateKey = row.DATAVENC.split('T')[0]; // yyyy-mm-dd
    const valor = parseFloat(row.VALORPARCELA) || 0;
    buckets[dateKey] = (buckets[dateKey] || 0) + valor;
  });

  // build display rows sorted by date
  const sortedDates = Object.keys(buckets).sort();
  const tbody = document.getElementById('tabelaMensalBody');
  tbody.innerHTML = ''; // reuse that table

  sortedDates.forEach(dateKey => {
  const tr = document.createElement('tr');
  tr.dataset.type = 'day';
  tr.dataset.date = dateKey; // yyyy-mm-dd
  tr.innerHTML = `
    <td>${formatDateBRFromISO(dateKey + 'T00:00:00')}</td>
    <td>${formatBRL(buckets[dateKey])}</td>
  `;
  tr.addEventListener('dblclick', () => {
  // drill into that specific day, forcing STATUS = 'ABERTO'
  const [year, month, day] = dateKey.split('-');
  const formatted = `${day}/${month}/${year}`;
  document.getElementById('dataDe').value = formatted;
  document.getElementById('dataAte').value = formatted;
  document.getElementById('statusSelect').value = 'ABERTO'; // enforce aberto
  buscarParcelas();
  document.getElementById('parcelas-body').parentElement.scrollIntoView({ behavior: 'smooth' });
});

  tbody.appendChild(tr);
});

}

// Monthly aggregation with month and year subtotals and grand total
async function verMensalComSubtotais() {
  let query = supabase
    .from('Parcelas')
    .select('DATAVENC, VALORPARCELA, STATUS')
    .eq('STATUS', 'ABERTO')
    .order('DATAVENC', { ascending: true });

  query = applyDateFilters(query);

  const { data, error } = await query;
  if (error) {
    alert('Erro ao carregar mensal: ' + error.message);
    console.error(error);
    return;
  }

  // Structure: year -> month -> sum
  const yearMonth = {};
  data.forEach(row => {
    if (!row.DATAVENC) return;
    const [datePart] = row.DATAVENC.split('T');
    const [year, month, day] = datePart.split('-');
    const ymKey = `${year}-${month}`; // e.g. "2025-08"
    const valor = parseFloat(row.VALORPARCELA) || 0;

    if (!yearMonth[year]) yearMonth[year] = {};
    if (!yearMonth[year][month]) yearMonth[year][month] = 0;
    yearMonth[year][month] += valor;
  });

  // Prepare table with subtotals
  const tbody = document.getElementById('tabelaMensalBody');
  tbody.innerHTML = '';

  let grandTotal = 0;
  Object.keys(yearMonth).sort().forEach(year => {
    let yearTotal = 0;

    const months = Object.keys(yearMonth[year]).sort();
    months.forEach(month => {
  const monthSum = yearMonth[year][month];
  yearTotal += monthSum;
  grandTotal += monthSum;

  // Row for month (show as "MÃªs X")
  const displayMonth = `MÃªs ${parseInt(month)}`; // e.g. "MÃªs 6"
  const tr = document.createElement('tr');
  tr.dataset.type = 'month';
  tr.dataset.year = year;
  tr.dataset.month = month;
  tr.innerHTML = `
    <td>${displayMonth}</td>
    <td>${formatBRL(monthSum)}</td>
  `;
  tr.addEventListener('dblclick', () => {
  // set filters to entire month, forcing STATUS = 'ABERTO'
  const m = String(parseInt(month)).padStart(2, '0');
  const firstDay = `01/${m}/${year}`;
  const lastDayDate = new Date(parseInt(year), parseInt(month), 0); // last day of that month
  const lastDay = String(lastDayDate.getDate()).padStart(2, '0');
  const lastDayFormatted = `${lastDay}/${m}/${year}`;

  document.getElementById('dataDe').value = firstDay;
  document.getElementById('dataAte').value = lastDayFormatted;
  document.getElementById('statusSelect').value = 'ABERTO'; // enforce aberto
  buscarParcelas();
  document.getElementById('parcelas-body').parentElement.scrollIntoView({ behavior: 'smooth' });
});

  tbody.appendChild(tr);
});


    // Year subtotal
    const yearSubtotalRow = document.createElement('tr');
    yearSubtotalRow.style.fontWeight = 'bold';
    yearSubtotalRow.innerHTML = `
      <td>Subtotal ${year}</td>
      <td>${formatBRL(yearTotal)}</td>

    `;
    tbody.appendChild(yearSubtotalRow);
  });

  // Grand total
  const grandTotalRow = document.createElement('tr');
  grandTotalRow.style.fontWeight = 'bold';
  grandTotalRow.innerHTML = `
    <td>Grand Total</td>
    <td>${formatBRL(grandTotal)}</td>

  `;
  tbody.appendChild(grandTotalRow);
}






document.addEventListener('DOMContentLoaded', () => {
  const valorParcelaInput = document.getElementById('edit-valorparcela');
  const valorPagoInput = document.getElementById('edit-valorpago');
  const jurosInput = document.getElementById('edit-juros');

  if (valorParcelaInput && valorPagoInput && jurosInput) {
    valorPagoInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault(); // Prevent form submit
        const valorParcela = parseFloat(valorParcelaInput.value.replace(',', '.')) || 0;
        const valorPago = parseFloat(valorPagoInput.value.replace(',', '.')) || 0;
        const juros = valorPago - valorParcela;
        jurosInput.value = juros.toString().replace('.', ',');

        jurosInput.value = juros;
      }
    });
  }
});








</script>





















<div id="editarModal" style="
  display: none;
  position: fixed;
  top: 10%;
  left: 50%;
  transform: translateX(-50%);
  background: #d9dde2;
  padding: 1rem;
  border-radius: 10px;
  box-shadow: 0 0 12px rgba(0,0,0,0.3);
  z-index: 9999;
  width: 600px;
">
  <form id="editarForm" onsubmit="return false;">
    <label>ID: <input id="edit-id" type="text" readonly /></label><br>
    <label>Data Venc: <input id="edit-data" type="text" /></label><br>
    <label>Parcela: <input id="edit-parcela" type="text" /></label><br>
    <label>Valor Parcela: <input id="edit-valorparcela" type="text" /></label><br>
    <label>Juros: <input id="edit-juros" type="text" value="0" /></label><br>
    <label>Valor Pago: <input id="edit-valorpago" type="text" /></label><br>
    <label>Fornecedor: <input id="edit-fornecedor" type="text" /></label><br>
    <label>NÃºmero: <input id="edit-numero" type="text" /></label><br>
    <label>Status: <input id="edit-status" type="text" /></label><br>
    <label>Modo Pag: <input id="edit-modopag" type="text" /></label><br><br>
    <label>Comprovante: <input id="edit-comprovante" type="text" /></label><br><br>
    <label>Origem: <input id="edit-origem" type="text" /></label><br><br>
    <button type="submit" id="btnSalvarEdicao">Salvar AlteraÃ§Ãµes</button>
    <button type="button" onclick="fecharEditarModal()">Fechar</button>
    <button type="button" onclick="LiquidarModal()">Liquidar</button>
  </form>
</div>




<!-- Fornecedor Popup Modal -->
<div id="popupModal" style="display:none; position:fixed; top:10%; left:10%; right:10%; bottom:10%; background:white; border:2px solid #ccc; padding:1rem; overflow:auto; box-shadow: 0 0 12px rgba(0,0,0,0.2); z-index:999;">
  <h3>Selecione o Fornecedor</h3>

  <input type="text" id="searchInput" placeholder="Filtrar por nome..." style="width:100%; padding:0.5rem; margin-bottom:1rem; border:1px solid #ccc; border-radius:4px;" />

  <table id="popupTable" style="width:100%; border-collapse:collapse;">
    <thead>
      <tr>
        <th style="border:1px solid #ccc;">CÃ³digo</th>
        <th style="border:1px solid #ccc;">Fornecedor</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
  <br>
  <button onclick="document.getElementById('popupModal').style.display='none'">Fechar</button>
</div>




   </div> <!-- end #app -->

  <!-- Reveal app once login check passed -->
   <script>
     document.addEventListener('DOMContentLoaded', () => {
       document.getElementById('app').style.display = 'block';
     });
   </script>


</body>
</html>


